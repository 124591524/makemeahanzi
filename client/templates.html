<template name="path_stage">
  Choose a source for glyph path data for this character:
  <div class="options">
    {{#each options}}
      <a class="option">{{label}}</a>
      <div class="separator">â€¢</div>
    {{/each}}
  </div>
  <div class="alternative">
    Alternatively, use part of a glyph from another character:
    {{{editable "alternative" alternative}}}
  </div>
</template>

<template name="bridges_stage">
  Connect each pair of path points such that the segment between those points
  is part of some stroke outline. Click on two points to connect them by a
  bridge, or click on a bridge to drop it.
</template>

<template name="strokes_stage">
  Select paths to include in the glyph by clicking on them. The final number of
  strokes must agree with the stroke count in the character metadata.
</template>

<template name="analysis_stage">
  Decompose the character into components, if possible. Additionally, if the
  character is a phonetic-semantic compound, mark the components that play each
  of those roles.

  <div class="decomposition">
    {{> tree decomposition_data}}
  </div>
  <div class="radical">
    <label class="control-label">Radical:</label>
    {{{editable "radical" radical}}}
  </div>
  {{> etymology etymology_data}}
</template>

<template name="tree">
  <div class="tree" style="margin-left: {{path.length}}em;">
    <select class="form-control subtree-type">
      <option {{selected type "character"}}>Character</option>
      <option {{selected type "compound"}}>Compound</option>
    </select>
    {{#if (equals type "character")}}
      {{{editable "character" value}}}
      {{#if (equals value "?")}}
        (unknown)
      {{else}}
        <a class="link" href="#{{value}}">{{details value}}</a>
      {{/if}}
    {{/if}}
    {{#if (equals type "compound")}}
      <select class="form-control compound-type">
        {{#each compounds value}}
          <option {{selected value compound}}>{{label}}</option>
        {{/each}}
      </select>
    {{/if}}
  </div>
  {{#each children}}
    {{> tree this}}
  {{/each}}
</template>

<template name="etymology">
  <div class="etymology">
    <label class="control-label">Etymology:</label>
    <select class="form-control etymology-type">
      <option {{selected type "ideographic"}}>Ideographic</option>
      <option {{selected type "pictographic"}}>Pictographic</option>
      <option {{selected type "pictophonetic"}}>Pictophonetic</option>
    </select>
    {{#if (equals type "pictophonetic")}}
      <div class="component">
        {{{editable "semantic" semantic}}}
        ({{{editable "hint" hint}}}) provides the meaning while
        {{{editable "phonetic" phonetic}}} provides the pronunciation.
      </div>
    {{else}}
      {{{editable "hint" hint}}}
    {{/if}}
  </div>
</template>

<template name="order_stage">
  Detect the position of each component of this character and use that
  information to determine this character's stroke order.
  {{#each matching}}
    <div class="match">
      {{#each this}}
        <svg viewbox="0 0 1024 1024">
          <g transform="scale(1, -1) translate(0, -900)">
            {{#each this}}
              <path class="{{cls}}" fill="{{fill}}"
                    stroke="{{stroke}}" d="{{d}}"></path>
            {{/each}}
          </g>
        </svg>
      {{/each}}
      <div class="clear"></div>
    </div>
  {{/each}}
</template>
