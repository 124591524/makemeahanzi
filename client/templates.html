<template name="path_stage">
  Choose a source for glyph path data for this character:
  {{#each options}}
    <a class="option">{{label}}</a>
    <div class="separator">â€¢</div>
  {{/each}}
</template>

<template name="bridges_stage">
  Connect each pair of path points such that the segment between those points
  is part of some stroke outline. Click on two points to connect them by a
  bridge, or click on a bridge to drop it.
</template>

<template name="strokes_stage">
  Select paths to include in the glyph by clicking on them. The final number of
  strokes must agree with the stroke count in the character metadata.
</template>

<template name="analysis_stage">
  Decompose the character into components, if possible. Additionally, if the
  character is a phonetic-semantic compound, mark the components that play each
  of those roles.

  {{> decomposition_tree tree}}
  <div class="radical">
    <label class="control-label">Radical:</label>
    {{{editable "radical" radical}}}
  </div>
  <div class="etymology">
    <label class="control-label">Etymology:</label>
    <select class="form-control subtree-type">
      <option {{selected type "ideographic"}}>Ideographic</option>
      <option {{selected type "pictographic"}}>Pictographic</option>
      <option {{selected type "pictophonetic"}}>Pictophonetic</option>
    </select>
  </div>
</template>

<template name="decomposition_tree">
  <div class="decomposition-tree" style="margin-left: {{path.length}}em;">
    <select class="form-control subtree-type">
      <option {{selected type "character"}}>Character</option>
      <option {{selected type "compound"}}>Compound</option>
    </select>
    {{#if (equals type "character")}}
      {{{editable "character" value}}}
      {{#if (equals value "?")}}
        (unknown)
      {{else}}
        <a class="link" data-value="{{value}}">{{details value}}</a>
      {{/if}}
    {{/if}}
    {{#if (equals type "compound")}}
      <select class="form-control compound-type">
        {{#each compounds value}}
          <option {{selected value compound}}>{{label}}</option>
        {{/each}}
      </select>
    {{/if}}
  </div>
  {{#each children}}
    {{> decomposition_tree this}}
  {{/each}}
</template>
